/*!
 *  LazyWebp v1.0.0 - 10/31/2014
 *  http://faso.me/lazywebp
 *  Copyright (c) 2014 LevinWong - Licensed MIT 
 */
define(function(a){var b=a("jquery.min.js"),c=function(a){this.options=b.extend({},c.defaults,a),this._init()};return c.prototype={constructor:"Lazyloader",_init:function(){var a=this.options;this.container=b(a.container&&0!=b(a.container).length?a.container:document),this.scollTimer=null,(a.dynamic||(this.lazyItems=this.container.find("["+a.lazyAttr+"]"),0!=this.lazyItems.length))&&(this._bindEvent(),this._loadItems())},_bindEvent:function(){var a=this;this._loadFn=function(){clearTimeout(a.scollTimer),a.scrollTimer=setTimeout(function(){a._loadItems()},a.options.scrollTimerDelay)},b(window).bind("resize.lazyload scroll.lazyload",this._loadFn)},_loadItems:function(){var a=this.options,c=this,d=a.lazyAttr,e=a.dynamic?this.container.find("["+d+"]"):this.lazyItems;b.each(e,function(){var a=b(this);if(c._isInViewport(a)){var e=a.attr(d);a.attr("src",e).removeAttr(d)}}),a.dynamic||(this.lazyItems=e.filter("["+d+"]"),0==this.lazyItems.length&&a.autoDestroy&&c.destroy())},_isInViewport:function(a){var a=b(a),c=b(window),d=c.scrollTop(),e=this.options.threshold,f=d+c.height()+e,g=d-e,h=a.offset().top,i=h+a.outerHeight();return h>f||g>i?!1:!0},destroy:function(){b(window).unbind("resize.lazyload scroll.lazyload",this._loadFn)}},c.toLazyloadHtml=function(a,b,c){var b=b||this.defaults.lazyAttr,c=c||this.defaults.placeholder,d=/(<img.*?)src=["']([^"']+)["'](.*?>)/gi;return a.replace(d,'$1src="'+c+'" '+b+'="$2" $3')},c.defaults={container:"document",placeholder:"http://static.gtimg.com/icson/img/common/blank.png",lazyAttr:"data-lazyload",autoDestroy:!0,dynamic:!1,threshold:100,scrollTimerDelay:50},c});