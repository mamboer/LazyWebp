/*!
 *  LazyWebp v1.0.0 - 10/31/2014
 *  http://faso.me/lazywebp
 *  Copyright (c) 2014 LevinWong - Licensed MIT 
 */
!function(a,b,c,d){if("undefined"!=typeof c.module&&c.module.exports){if(d&&c.require)for(var e=0;e<d.length;e++)c[d[e]]=c.require(d[e]);c.module.exports=b.apply(c)}else"undefined"!=typeof c.define&&"function"==typeof c.define&&c.define.amd?define(a,d||[],b):c[a]=b.apply(c)}("WebpDetect",function(){var a={};return CTX=this,a._cb=function(a,b){this.isSupport=function(b){b(a)},b(a),(CTX.chrome||CTX.opera&&CTX.localStorage)&&CTX.localStorage.setItem("webpsupport",a)},a.isSupport=function(b){if(b){if(!CTX.chrome&&!CTX.opera)return a._cb(!1,b);if(CTX.localStorage&&null!==CTX.localStorage.getItem("webpsupport")){var c=CTX.localStorage.getItem("webpsupport");return void a._cb("true"===c,b)}var d=new Image;d.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",d.onload=d.onerror=function(){a._cb(2===d.width&&2===d.height,b)}}},a.run=function(a,b){this.isSupport(function(c){c?a():b()})},a},this),function(a,b,c,d){if("undefined"!=typeof c.module&&c.module.exports){if(d&&c.require)for(var e=0;e<d.length;e++)c[d[e]]=c.require(d[e]);c.module.exports=b.apply(c)}else"undefined"!=typeof c.define&&"function"==typeof c.define&&c.define.amd?define(a,d||[],b):c[a]=b.apply(c)}("LazyPic",function(a,b){a=a||this.WebpDetect,b=b||this.jQuery||this.Zepto;var c=function(a){this.options=b.extend({},c.defaults,a),this._init()};return c.prototype={constructor:"Lazyloader",_init:function(){var a=this.options;this.scrollTimer=null,this.container=b(a.container&&0!=b(a.container).length?a.container:document),(a.dynamic||(this.lazyItems=this.container.find("["+a.lazyAttr+"]"),0!=this.lazyItems.length))&&(this._bindEvent(),this._loadItems())},_bindEvent:function(){var a=this;this._loadFn=function(){clearTimeout(a.scrollTimer),a.scrollTimer=setTimeout(function(){a._loadItems()},a.options.scrollTimerDelay)},b(window).on("resize.lazyload scroll.lazyload",this._loadFn)},_loadItems:function(){var c=this.options,d=this,e=c.lazyAttr,f=c.lazyAttrWebp,g=c.dynamic?this.container.find("["+e+"]"):this.lazyItems;a.run(function(){b.each(g,function(){var a=b(this);if(d._isInViewport(a)){var c=a.attr(f)||a.attr(e);a.attr("src",c).removeAttr(f).removeAttr(e)}})},function(){b.each(g,function(){var a=b(this);if(d._isInViewport(a)){var c=a.attr(e);a.attr("src",c).removeAttr(e)}})}),c.dynamic||(this.lazyItems=g.filter("["+e+"]"),0==this.lazyItems.length&&c.autoDestroy&&d.destroy())},_isInViewport:function(a){var a=b(a),c=b(window),d=c.scrollTop(),e=this.options.threshold,f=d+c.height()+e,g=d-e,h=a.offset().top,i=h+a.outerHeight();return h>f||g>i?!1:!0},destroy:function(){b(window).off("resize.lazyload scroll.lazyload",this._loadFn)}},c.toLazyloadHtml=function(a,b,c){var b=b||this.defaults.lazyAttr,c=c||this.defaults.placeholder,d=/(<img.*?)src=["']([^"']+)["'](.*?>)/gi;return a.replace(d,'$1src="'+c+'" '+b+'="$2" $3')},c.defaults={container:"document",placeholder:"http://static.gtimg.com/icson/img/common/blank.png",lazyAttr:"data-lazyload",lazyAttrWebp:"data-webp",autoDestroy:!0,dynamic:!1,threshold:100,scrollTimerDelay:50},c},this,["WebpDetect","jquery"]);